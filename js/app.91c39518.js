(function(){var e={356:function(e,t,l){"use strict";var n=l(1829),a=(l(1479),l(8586),l(627),l(5675),l(3214),l(4908),l(9556),l(2019),l(5168),l(6166)),u=l(5302),r=l(7803),o=l(7861),i=l.n(o),c=l(3855),s=l(8934);const d={class:"version-container"},f={class:"flex gap-2",style:{"text-align":"left"}},v={key:0},p={class:"table-container"},b={key:1};var k={__name:"App",setup(e){const t=(0,u.KR)(""),l=(0,u.KR)([]),n=(0,u.KR)(),o=(0,u.KR)(!1),k=(0,u.KR)(!0);let h,m;(0,a.sV)((async()=>{h=await i()({locateFile:e=>"/sql-wasm.wasm"});const e=await fetch("/css/style.css"),t=await e.arrayBuffer();m=new h.Database(new Uint8Array(t)),R()}));const y=(0,u.KR)(),g=(0,u.KR)(),_=(0,u.KR)(),F=(0,u.KR)(),R=()=>{if(m)try{const e=m.prepare("SELECT YEAR || '/' || BulletinDate as date, AID || ' (Stock)' as aid, Moderator, BulletinLink FROM ViolationRecords WHERE Change is null  order by BulletinLink desc  limit 1 ");e.step();const t=e.getAsObject();y.value=t.date,g.value=t.aid,F.value=t.BulletinLink,_.value=t.Moderator}catch(e){console.error("Query failed:",e)}else alert("Database not initialized.")},w=()=>{if(m)if(t.value=t.value.trim(),t.value)try{const e=m.prepare("SELECT YEAR || '/' || BulletinDate as date, AID || ' (Stock)' as aid, ViolationRule, Punish, BulletinLink FROM ViolationRecords WHERE userId = :userId COLLATE NOCASE AND Change is null order by date ");e.bind({":userId":t.value});const a=[];while(e.step())a.push(e.getAsObject());l.value=[],n.value="",a.length>0?l.value=a:n.value="查無水桶公告紀錄 (有可能只是刪文 板主沒公告 可在檢舉板搜尋)"}catch(e){console.error("Query failed:",e)}else(0,c.nk)({type:"error",message:"請輸入帳號"});else alert("Database not initialized.")},E=()=>{o.value=!o.value},C=()=>{const e=["date","aid","ViolationRule","Punish"],t=l.value.map((t=>e.map((e=>t[e])).join("\t"))).join("\n");var n="";k.value&&(n="違規紀錄：");const a=document.createElement("textarea");a.value=n+"\n"+t,document.body.appendChild(a),a.select(),document.execCommand("copy"),document.body.removeChild(a),(0,c.nk)({type:"success",message:"已複製到剪貼簿"})};return(e,i)=>{const c=(0,a.g2)("el-icon"),h=(0,a.g2)("el-tag"),m=(0,a.g2)("el-link"),R=(0,a.g2)("el-input"),O=(0,a.g2)("el-form-item"),L=(0,a.g2)("el-button"),x=(0,a.g2)("el-form"),W=(0,a.g2)("el-table-column"),j=(0,a.g2)("el-table"),A=(0,a.g2)("el-switch"),V=(0,a.g2)("el-text");return(0,a.uX)(),(0,a.CE)(a.FK,null,[(0,a.Lk)("div",d,[(0,a.Lk)("div",f,[(0,a.bF)(h,{type:"primary",onClick:E},{default:(0,a.k6)((()=>[i[2]||(i[2]=(0,a.eW)(" 目前同步進度 ")),(0,a.bF)(c,null,{default:(0,a.k6)((()=>[o.value?((0,a.uX)(),(0,a.Wv)((0,u.R1)(s.ziD),{key:1})):((0,a.uX)(),(0,a.Wv)((0,u.R1)(s.BHL),{key:0}))])),_:1})])),_:1})]),o.value?((0,a.uX)(),(0,a.CE)("div",v,[(0,a.bF)(m,{href:F.value,target:"_blank"},{default:(0,a.k6)((()=>[(0,a.eW)((0,r.v_)(_.value)+" "+(0,r.v_)(y.value)+" "+(0,r.v_)(g.value),1)])),_:1},8,["href"])])):(0,a.Q3)("",!0)]),(0,a.bF)(x,{inline:!0},{default:(0,a.k6)((()=>[(0,a.bF)(O,{label:"帳號",required:""},{default:(0,a.k6)((()=>[(0,a.bF)(R,{modelValue:t.value,"onUpdate:modelValue":i[0]||(i[0]=e=>t.value=e),placeholder:"請輸入帳號",clearable:!0,style:{width:"200px"}},null,8,["modelValue"])])),_:1}),(0,a.bF)(O,null,{default:(0,a.k6)((()=>[(0,a.bF)(L,{type:"primary",size:"default",onClick:w},{default:(0,a.k6)((()=>i[3]||(i[3]=[(0,a.eW)("查詢")]))),_:1})])),_:1})])),_:1}),(0,a.Lk)("div",p,[l.value.length>0?((0,a.uX)(),(0,a.Wv)(j,{key:0,data:l.value},{default:(0,a.k6)((()=>[(0,a.bF)(W,{prop:"date",label:"日期"}),(0,a.bF)(W,{label:"文章代碼"},{default:(0,a.k6)((({row:e})=>[(0,a.bF)(m,{href:e.BulletinLink,target:"_blank"},{default:(0,a.k6)((()=>[(0,a.eW)((0,r.v_)(e.aid),1)])),_:2},1032,["href"])])),_:1}),(0,a.bF)(W,{prop:"ViolationRule",label:"違反板規"}),(0,a.bF)(W,{prop:"Punish",label:"處置方式"})])),_:1},8,["data"])):(0,a.Q3)("",!0),i[7]||(i[7]=(0,a.Lk)("div",{style:{"margin-top":"30px"}},null,-1)),l.value.length>0?((0,a.uX)(),(0,a.CE)("div",b,[(0,a.bF)(A,{modelValue:k.value,"onUpdate:modelValue":i[1]||(i[1]=e=>k.value=e)},null,8,["modelValue"]),(0,a.bF)(V,{class:"mx-1",size:"small"},{default:(0,a.k6)((()=>i[4]||(i[4]=[(0,a.eW)("增加「違規紀錄：」")]))),_:1}),i[6]||(i[6]=(0,a.Lk)("br",null,null,-1)),l.value.length>0?((0,a.uX)(),(0,a.Wv)(L,{key:0,type:"warning",onClick:C},{default:(0,a.k6)((()=>[(0,a.bF)(c,null,{default:(0,a.k6)((()=>[(0,a.bF)((0,u.R1)(s.f5b))])),_:1}),i[5]||(i[5]=(0,a.eW)(" 複製到剪貼簿"))])),_:1})):(0,a.Q3)("",!0)])):(0,a.Q3)("",!0),(0,a.bF)(V,{class:"mx-1",type:"info"},{default:(0,a.k6)((()=>[(0,a.eW)((0,r.v_)(n.value),1)])),_:1})])],64)}}};const h=k;var m=h,y=l(8906);l(6404);const g=(0,n.Ef)(m);g.use(y.A),g.mount("#app")},1695:function(){},7105:function(){},7235:function(){}},t={};function l(n){var a=t[n];if(void 0!==a)return a.exports;var u=t[n]={id:n,loaded:!1,exports:{}};return e[n].call(u.exports,u,u.exports,l),u.loaded=!0,u.exports}l.m=e,function(){var e=[];l.O=function(t,n,a,u){if(!n){var r=1/0;for(s=0;s<e.length;s++){n=e[s][0],a=e[s][1],u=e[s][2];for(var o=!0,i=0;i<n.length;i++)(!1&u||r>=u)&&Object.keys(l.O).every((function(e){return l.O[e](n[i])}))?n.splice(i--,1):(o=!1,u<r&&(r=u));if(o){e.splice(s--,1);var c=a();void 0!==c&&(t=c)}}return t}u=u||0;for(var s=e.length;s>0&&e[s-1][2]>u;s--)e[s]=e[s-1];e[s]=[n,a,u]}}(),function(){l.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return l.d(t,{a:t}),t}}(),function(){l.d=function(e,t){for(var n in t)l.o(t,n)&&!l.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})}}(),function(){l.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){l.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){l.nmd=function(e){return e.paths=[],e.children||(e.children=[]),e}}(),function(){var e={524:0};l.O.j=function(t){return 0===e[t]};var t=function(t,n){var a,u,r=n[0],o=n[1],i=n[2],c=0;if(r.some((function(t){return 0!==e[t]}))){for(a in o)l.o(o,a)&&(l.m[a]=o[a]);if(i)var s=i(l)}for(t&&t(n);c<r.length;c++)u=r[c],l.o(e,u)&&e[u]&&e[u][0](),e[u]=0;return l.O(s)},n=self["webpackChunkmy_vue3_project"]=self["webpackChunkmy_vue3_project"]||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))}();var n=l.O(void 0,[504],(function(){return l(356)}));n=l.O(n)})();
//# sourceMappingURL=app.91c39518.js.map